---
var {contenido = 'article', url, autor, titulo, ciencia, fecha, imagen, design, fotoAutor, alt, lan} = Astro.props

if (imagen == undefined){
    imagen = "/images/portada-por-defecto.webp"
}

let inicial

const iniciales = ["m", "b", "g", "f", "q", "t", "p", "c"]
const es = ["matemáticas", "biología", "geología", "física", "química", "tecnología", "programación", "científicos"]
const en = ["maths", "biology", "geology", "physics", "chemistry", "technology", "coding", "scientifics"]
const fr = ["mathématiques", "biologie", "géologie", "physique", "chimie", "technologie", "programmation", "scientifiques"]
const gl = ["matemáticas", "bioloxía", "xeoloxía", "física", "química", "tecnoloxía", "programación", "científicos"]
const ca = ["matemàtiques", "biologia", "geologia", "física", "química", "tecnologia", "programació", "científics"]
const eu = ["matematika", "biologia", "geologia", "fisika", "kimika", "teknologia", "programazioa", "zientzialariak"]

if (lan == "es"){
    inicial = iniciales[es.indexOf(ciencia)]
} else if (lan == "en"){
    inicial = iniciales[en.indexOf(ciencia)]
} else if (lan == "fr"){
    inicial = iniciales[fr.indexOf(ciencia)]
} else if (lan == "gl"){
    inicial = iniciales[gl.indexOf(ciencia)]
} else if (lan == "ca"){
    inicial = iniciales[ca.indexOf(ciencia)]
} else if (lan == "eu"){
    inicial = iniciales[eu.indexOf(ciencia)]
}
---
<card class="my-6 md:my-4 2xl:my-8" id={design}>
    <a class="group" href={url}>
        <main id={contenido}>
            <div class="bg-principal-black group-hover:scale-[1.045] rounded-lg transition-all relative w-full">
                <img  src={imagen} class="bg-principal-white w-full rounded-lg image object-cover text-principal-white text-sm" alt={alt}>
            </div>
            <div id={inicial}>
                <h6 class="uppercase mt-4 min-[1800px]:text-xl font-generalsans-medium" id={inicial}>
                    {ciencia}
                </h6>
                <div class="svg-wrap">
                    <svg viewBox="0 0 400 20" xmlns="http://www.w3.org/2000/svg">
                        <path id="svg_line" d="m 1.986,8.91 c 55.429038,4.081 111.58111,5.822 167.11781,2.867 22.70911,-1.208 45.39828,-0.601 68.126,-0.778 28.38173,-0.223 56.76079,-1.024 85.13721,-1.33 24.17379,-0.261 48.42731,0.571 72.58115,0.571"></path>
                    </svg>
                </div>
                <section class="link-svgline">
                    <h2 class="font-generalsans-semibold my-1 min-[1800px]:my-2 text-[1.3rem] min-[1800px]:text-3xl text-principal-black dark:text-principal-white title">
                        {titulo}
                        <svg class="link-svgline"><use xlink:href="#svg_line"></use></svg>
                    </h2>
                    <footer>
                        <div class="z-0 flex gap-x-1 min-[1800px]:gap-x-2 text-dark-gray dark:text-light-gray metadata-article text-[0.75rem] [&>p]:my-auto h-fit min-[1800px]:text-xl font-generalsans-medium">
                            <img alt="Foto de perfil del autor" src={fotoAutor} class="bg-principal-white h-4 w-4 min-[1800px]:h-6 min-[1800px]:w-6 rounded-full object-contain my-auto">
                            <p>{autor}</p>
                            <p>·</p>
                            <p>{fecha}</p>
                        </div>
                    </footer>
                </section>
            </div>
        </main>
    </a>
</card>

<style>
    #m{
        color:#004193;
        .link-svgline h2 svg.link-svgline {
            stroke: #004193;
        }
    }
    #b{
        color:#005100;
        .link-svgline h2 svg.link-svgline {
            stroke: #005100;
        }
    }
    #g{
        color:#6E3400;
        .link-svgline h2 svg.link-svgline {
            stroke: #6E3400;
        }
    }
    #f{
        color:#950000;
        .link-svgline h2 svg.link-svgline {
        stroke: #950000;
        }
    }
    #q{
        color:#820083;
        .link-svgline h2 svg.link-svgline {
            stroke: #820083;
        }
    }
    #t{
        color:#623B00;
        .link-svgline h2 svg.link-svgline {
            stroke: #623B00;
        }
    }
    #p{
        color:#5a12b0;
        .link-svgline h2 svg.link-svgline {
            stroke: #5a12b0;
        }
    }
    #c{
        color:#004f3e;
        .link-svgline h2 svg.link-svgline {
            stroke: #004f3e;
        }
    }

    #i{
        color:#313131;
        .link-svgline h2 svg.link-svgline {
            stroke: #313131;
        }
    }
    :is(.dark #m) {
        color:#a8c6e3;
        .link-svgline h2 svg.link-svgline {
        stroke: #a8c6e3;
        }
    }

    :is(.dark #i) {
        color:#b6b6b6;
        .link-svgline h2 svg.link-svgline {
        stroke: #b6b6b6;
        }
    }

    :is(.dark #b) {
        color:#64db62;
        .link-svgline h2 svg.link-svgline {
        stroke: #64db62;
    }
    }
    :is(.dark #g) {
        color:#e2bba5;
        .link-svgline h2 svg.link-svgline {
        stroke: #e2bba5;
        }
    }
    :is(.dark #f) {
        color:#ffaaa2;
        .link-svgline h2 svg.link-svgline {
        stroke: #ffaaa2;
        }
    }
    :is(.dark #q) {
        color:#ff99ff;
        .link-svgline h2 svg.link-svgline {
        stroke: #ff99ff;
        }
    }
    :is(.dark #t) {
        color:#f2ba48;
        .link-svgline h2 svg.link-svgline {
        stroke: #f2ba48;
        }
    }
    :is(.dark #p) {
        color:#e9aaff;
        .link-svgline h2 svg.link-svgline {
        stroke: #e9aaff;
        }
    }
    :is(.dark #c) {
        color:#16dac0;
        .link-svgline h2 svg.link-svgline {
        stroke: #16dac0;
        }
    }
    #sm{
        width: 35%;
        .image{
            height:10rem;
            @media only screen and (min-width: 1800px){
                height:18rem;
        }}
        @media only screen and (max-width: 1100px){
            width: 100%;
        }

        @media only screen and (max-width: 768px){
            width: 100%;
        }
    }

    #xs{
        width: 100%;
        .image{
            height:10rem;
            @media only screen and (min-width: 1800px){
                height:18rem;
        }}
    }

    #xl{
        width: 48%;
        .title{
            font-size: 2rem;
        }
        .image{
            height:25rem;
        }
        @media only screen and (max-width: 768px){
            width: 100%;
        }
    }

    #lg{
        width:28%;
        .title{
            font-size: 2rem;
        }
        .image{
            height:25rem;
        }
        @media only screen and (max-width: 768px){
            width: 100%;
        }
    }
    .svg-wrap {
    position: absolute;
    width: 0px;
    height: 0px;
    overflow: hidden;
    }

    h2 {
    text-decoration: none;
    outline: none;
    }

    section {
    position: relative;
    z-index: 1; /* needed for setting pseudo-element z-index */
    overflow: hidden;
    backface-visibility: hidden;
    }

    section h2 {
    position: relative;
    display: inline-block;
    outline: none;
    vertical-align: bottom;
    text-decoration: none;
    }

    section h2::before,
    section h2::after {
    pointer-events: none;
    backface-visibility: hidden;
    font-smoothing: antialiased;
    }

    .link-svgline h2 svg.link-svgline {
        position: absolute;
        top: 100%;
        left: 0;
        overflow: hidden;
        margin: 0;
        width: 100%;
        height: 20px;
        margin-top: 10px; 
        transition: stroke-dashoffset 0.3s ease-in-out;
        transform: translateY(-90%);
        fill: none;
        stroke-width: 5;
        stroke-dasharray: 400px; 
        stroke-dashoffset: 400px;
        z-index:10;
    }

    .group:hover .link-svgline svg.link-svgline {
        stroke-dashoffset: 0px; 
    }
</style>
